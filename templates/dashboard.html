{% extends 'layout.html' %}

{% block head %}
<title>{{ user.name }} | LP Gym</title>
{% endblock %}

{% block body %}

<style>
/* Background & container */
.member-dashboard {
  background: #0b0b0b;
  min-height: 100vh;
  padding-top: 120px;
  padding-bottom: 80px;
  color: #fff;
}

/* Profile Card */
.dashboard-card {
  background: linear-gradient(135deg, #1a1a1a, #1f1f1f);
  border-radius: 20px;
  padding: 30px;
  color: #fff;
  box-shadow: 0 20px 60px rgba(0,0,0,0.7);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.dashboard-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 25px 70px rgba(0,0,0,0.8);
}

.profile-pic {
  width: 140px;
  height: 140px;
  object-fit: cover;
  border: 4px solid #ff3b3b;
  transition: transform 0.3s ease;
}
.profile-pic:hover {
  transform: scale(1.05);
}

/* User Info */
.dashboard-card h4 {
  font-weight: 800;
  font-size: 1.5rem;
}
.badge-member {
  background: #ff3b3b;
  font-weight: 600;
  letter-spacing: 1px;
  padding: 0.5em 1em;
  border-radius: 999px;
}

/* Stats Cards */
.stats-row {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
}
.stat-card {
  background: linear-gradient(135deg, #1a1a1a, #1f1f1f);
  border-radius: 16px;
  padding: 25px;
  width: 250px;
  text-align: center;
  box-shadow: 0 15px 40px rgba(0,0,0,0.5);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 20px 50px rgba(0,0,0,0.6);
}
.stat-card i {
  font-size: 2.5rem;
  margin-bottom: 10px;
  color: #ff3b3b;
}
.stat-card h5 {
  font-weight: 700;
  margin-bottom: 5px;
}
.stat-card p {
  color: #bbb;
  font-size: 0.9rem;
}

/* Progress Bar */
.progress {
  height: 20px;
  border-radius: 10px;
  overflow: hidden;
  background: #222;
}
.progress-bar {
  background: #ff3b3b;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: width 0.5s ease;
  color: #fff;
}

/* Action Buttons */
.dashboard-actions {
  margin-top: 40px;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 15px;
}
.dashboard-actions .btn {
  padding: 12px 25px;
  font-weight: 600;
  border-radius: 999px;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.dashboard-actions .btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 25px rgba(255,59,59,0.35);
}
</style>

<main class="page-content">
<section class="member-dashboard py-5">
  <div class="container">

    <!-- Welcome -->
    <h2 class="text-center text-light fw-bold mb-5">
      Welcome back, {{ user.name }}
    </h2>

    <!-- Profile Card -->
    <div class="card dashboard-card mb-5">
      <div class="row align-items-center g-4">

        <div class="col-md-3 text-center">
          <img
            src="{{ url_for('static', filename='images/profile.png') }}"
            class="rounded-circle profile-pic"
            alt="Profile"
          >
        </div>

        <div class="col-md-5">
          <h4 class="fw-bold mb-2">{{ user.name }}</h4>
          <span class="badge badge-member text-uppercase">
            {{ user.package }} Member
          </span>
          <p class="text-secondary mt-3 mb-1">
            <i class="bi bi-envelope me-2"></i>{{ user.email }}
          </p>
          <p class="text-secondary">
            <i class="bi bi-telephone me-2"></i>{{ user.phone }}
          </p>
        </div>

        <div class="col-md-4 text-md-end">
          <p class="text-secondary mb-1">Membership Status</p>
          <h5 class="fw-bold text-success">ACTIVE</h5>
          <p class="text-secondary mb-0">
            Expires: <strong>{{ user.expiry_date }}</strong>
          </p>
        </div>

      </div>
    </div>

    <!-- Stats -->
    <div class="stats-row mb-5">

      <!-- Attendance -->
      <div class="stat-card">
        <i class="bi bi-calendar-check"></i>
        <h5>Attendance</h5>
        <p>{{ user.attendance_count }} sessions this month</p>
        <form action="/checkin" method="POST">
          <button class="btn btn-danger btn-sm mt-2">
            Check-in Today
          </button>
        </form>
      </div>

      <!-- Progress -->
      <div class="stat-card">
        <i class="bi bi-bar-chart"></i>
        <h5>Progress</h5>
        <div class="progress mb-2">
          <div class="progress-bar" style="width: {{ user.progress }}%;">
            {{ user.progress }}%
          </div>
        </div>
        <p class="text-secondary mb-0">Since last month</p>
      </div>

      <!-- Membership -->
      <div class="stat-card">
        <i class="bi bi-clock-history"></i>
        <h5>Membership</h5>
        <p>
          Expires:
          <strong>
            {{ user.membership_expiry.strftime('%d %b %Y') if user.membership_expiry else 'N/A' }}
          </strong>
        </p>
        <a href="{{ url_for('extend_membership') }}">
          <button class="btn btn-outline-danger btn-sm mt-2">
            Extend Membership
          </button>
        </form>
      </div>
    </div>

    <!-- Actions -->
    <div class="dashboard-actions">
      <a href="/upgrade_membership" class="btn btn-danger">
        <i class="bi bi-arrow-up-circle me-1"></i> Upgrade Plan
      </a>
      <a href="/logout" class="btn btn-outline-light">
        <i class="bi bi-box-arrow-right me-1"></i> Logout
      </a>
    </div>

  </div>
</section>
</main>
{% endblock %}
